{% comment %}
  Reusable carousel component
  Parameters:
  - id: unique carousel ID
  - title: section title
  - items: array of items to display
  - auto_advance: boolean for auto-advance (default: false)
  - interval: auto-advance interval in ms (default: 5000)
{% endcomment %}

{% assign carousel_items = include.items | where: 'carousel', true %}
{% assign auto_advance = include.auto_advance | default: false %}
{% assign interval = include.interval | default: 5000 %}

{% if carousel_items.size > 0 %}
  <div class="lab-carousel mb-5">
    {% if include.title %}
      <h2 class="mb-3" style="text-align: left;">{{ include.title }}</h2>
    {% endif %}

    <div
      id="{{ include.id }}"
      class="carousel slide"
      data-ride="{% if auto_advance %}carousel{% else %}false{% endif %}"
      {% if auto_advance %}
        data-interval="{{ interval }}"
      {% endif %}
    >
      <!-- Indicators -->
      <ol class="carousel-indicators">
        {% for item in carousel_items %}
          <li
            data-target="#{{ include.id }}"
            data-slide-to="{{ forloop.index0 }}"
            {% if forloop.first %}
              class="active"
            {% endif %}
          ></li>
        {% endfor %}
      </ol>

      <!-- Carousel items -->
      <div class="carousel-inner">
        {% for item in carousel_items %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <div class="carousel-card mx-auto">
              <a href="{{ item.url | relative_url }}" class="text-decoration-none">
                {% if item.img %}
                  <div class="carousel-image-container">
                    <img src="{{ item.img | relative_url }}" class="carousel-image" alt="{{ item.title }}">
                  </div>
                {% endif %}
                <div class="carousel-content">
                  <h4 class="carousel-title">{{ item.title }}</h4>
                  {% if item.description %}
                    <p class="carousel-description">{{ item.description }}</p>
                  {% endif %}
                </div>
              </a>
            </div>
          </div>
        {% endfor %}
      </div>

      <!-- Navigation controls -->
      <a class="carousel-control-prev" href="#{{ include.id }}" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#{{ include.id }}" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
{% endif %}
